{"lambda-basic-execution": {"policy_content": {"Statement": [{"Action": ["logs:CreateLogGroup", "logs:CreateLogStream", "logs:PutLogEvents", "dynamodb:GetItem", "dynamodb:Query", "dynamodb:PutItem", "dynamodb:Batch*", "dynamodb:DeleteItem", "dynamodb:Scan", "cognito-idp:DescribeUserPool", "cognito-idp:GetUser", "cognito-idp:ListUsers", "cognito-idp:AdminCreateUser", "cognito-idp:AdminInitiateAuth", "cognito-idp:GetIdentityProviderByIdentifier", "cognito-idp:ListUserPools", "cognito-idp:ListUserPoolClients", "cognito-idp:AdminRespondToAuthChallenge", "cognito-idp:AdminConfirmSignUp"], "Effect": "Allow", "Resource": "*"}], "Version": "2012-10-17"}, "resource_type": "iam_policy"}, "task11_api": {"resource_type": "api_gateway", "deploy_stage": "api", "dependencies": [], "authorizers": {"authorizer": {"type": "COGNITO_USER_POOLS", "identity_source": "method.request.header.Authorization", "ttl": 300, "user_pools": ["${booking_userpool}"]}}, "resources": {"/signin": {"enable_cors": true, "POST": {"authorization_type": "NONE", "integration_type": "lambda", "lambda_name": "api_handler", "api_key_required": false, "method_request_parameters": {}, "integration_request_body_template": {}, "responses": [], "integration_responses": [], "default_error_pattern": true, "enable_proxy": true}}, "/signup": {"enable_cors": false, "POST": {"authorization_type": "NONE", "integration_type": "lambda", "lambda_name": "api_handler", "api_key_required": false, "method_request_parameters": {}, "integration_request_body_template": {}, "responses": [], "integration_responses": [], "default_error_pattern": true, "enable_proxy": true}}, "/tables": {"enable_cors": true, "GET": {"authorization_type": "authorizer", "integration_type": "lambda", "lambda_name": "api_handler", "api_key_required": false, "method_request_parameters": {}, "integration_request_body_template": {}, "responses": [], "integration_responses": [], "default_error_pattern": true, "enable_proxy": true}, "POST": {"authorization_type": "authorizer", "integration_type": "lambda", "lambda_name": "api_handler", "api_key_required": false, "method_request_parameters": {}, "integration_request_body_template": {}, "responses": [], "integration_responses": [], "default_error_pattern": true, "enable_proxy": true}}, "/tables/{tableId}": {"enable_cors": true, "GET": {"authorization_type": "authorizer", "integration_type": "lambda", "lambda_name": "api_handler", "api_key_required": false, "method_request_parameters": {}, "integration_request_body_template": {}, "responses": [], "integration_responses": [], "default_error_pattern": true, "enable_proxy": true}}, "/reservations": {"enable_cors": true, "GET": {"authorization_type": "authorizer", "integration_type": "lambda", "lambda_name": "api_handler", "api_key_required": false, "method_request_parameters": {}, "integration_request_body_template": {}, "responses": [], "integration_responses": [], "default_error_pattern": true, "enable_proxy": true}, "POST": {"authorization_type": "authorizer", "integration_type": "lambda", "lambda_name": "api_handler", "api_key_required": false, "method_request_parameters": {}, "integration_request_body_template": {}, "responses": [], "integration_responses": [], "default_error_pattern": true, "enable_proxy": true}}}, "tags": {}}, "${reservations_table}": {"resource_type": "dynamodb_table", "hash_key_name": "id", "hash_key_type": "S", "read_capacity": 1, "write_capacity": 1, "global_indexes": [], "autoscaling": [], "tags": {}}, "${tables_table}": {"resource_type": "dynamodb_table", "hash_key_name": "id", "hash_key_type": "N", "read_capacity": 1, "write_capacity": 1, "global_indexes": [], "autoscaling": [], "tags": {}}, "${booking_userpool}": {"resource_type": "cognito_idp", "password_policy": {"minimum_length": 8, "require_uppercase": true, "require_symbols": true, "require_lowercase": true, "require_numbers": true}, "auto_verified_attributes": [], "sms_configuration": {}, "username_attributes": [], "custom_attributes": [], "client": {"client_name": "client-app", "generate_secret": false, "explicit_auth_flows": ["ALLOW_ADMIN_USER_PASSWORD_AUTH", "ALLOW_CUSTOM_AUTH", "ALLOW_USER_SRP_AUTH", "ALLOW_REFRESH_TOKEN_AUTH"]}, "tags": {}}, "api_handler-role": {"predefined_policies": [], "principal_service": "lambda", "custom_policies": ["lambda-basic-execution"], "resource_type": "iam_role", "tags": {}}, "api_handler": {"version": "1.0", "name": "api_handler", "func_name": "lambdas/api_handler/index.handler", "resource_type": "lambda", "iam_role_name": "api_handler-role", "runtime": "nodejs20.x", "memory": 128, "timeout": 100, "lambda_path": "lambdas\\api_handler", "event_sources": [], "publish_version": true, "alias": "${lambdas_alias_name}", "dependencies": [{"resource_name": "${booking_userpool}", "resource_type": "cognito_idp"}, {"resource_name": "${tables_table}", "resource_type": "dynamodb_table"}, {"resource_name": "${reservations_table}", "resource_type": "dynamodb_table"}], "env_variables": {"CUPId": {"resource_name": "${booking_userpool}", "resource_type": "cognito_idp", "parameter": "id"}, "CUPClientId": {"resource_name": "${booking_userpool}", "resource_type": "cognito_idp", "parameter": "client_id"}, "tablestable": "${tables_table}", "revtable": "${reservations_table}"}, "url_config": {}, "ephemeral_storage": 512, "tags": {}}}